  
{%- from "templates/print_formats/standard_macros.html" import add_header, print_value with context -%}

<style>
	.print-format {
		padding: 4mm;
		font-size: 8.0pt !important;
	}
	.print-format td {
		vertical-align:middle !important;
	}
</style>
	<p class="text-right text-muted">{{ __("Printed On ") }}{%= frappe.datetime.str_to_user(frappe.datetime.get_datetime_as_string()) %}</p>
	<div class="container">
	<div class="row">
		{% if (filters.customer) { %}
		<div class="col text-center font-weight-light"> 
			{{ __("Customer Name: ") }} {%= filters.customer_name %} 
		</div>
		{% } %}

		{% if (filters.sales_person) { %}
		<div 	class="col text-center font-weight-light"> 
			{{ __("Sales Person: ") }} {%= filters.sales_person %} 
		</div>
		{% }  %}			

		{% if (filters.territory) { %}
		<div 	class="col text-center font-weight-light"  style="width: 95%;"> 
			{{ __("Sector: ") }}	{%= filters.territory %} 
		</div>
		{% }  %}
	</div>
	<table class="table table-borderless align-right">
		<thead>
			<tr>
				<th width="40%">{%= __("Customer Name") %}</th>
				<th width="23%" >{%= __("Address") %} </th>
				<th width="13%">{%= __("Total Balance") %}</th>
				<th width="4%">{%= __("Code") %}</th>
				<th width="14%">{%= __("...") %}</th>

			</tr>
		</thead>
		<tbody style="font-size: 1rem; white-space:nowrap;">
			{% for(var i=0, l=data.length; i<l; i++) { %}
				<tr style="text-align: left; max-width: 90%">
					<td style="text-align: left">{%= data[i]["party"] %}	 </td>					
					<td style="max-width:30px;text-overflow:ellipsis; overflow: hidden;">{%= data[i]["primary_address"]?
						data[i]["primary_address"].replaceAll("<br>"," ").replace("Pakistan",""):
						"" %}</td>
					<td style="text-align: center; font-size:1.3rem">
							{%= format_currency(data[i]["balance"].toFixed(), data[i]["currency"]).split(".")[0] %}
					</td>
					<td style="text-align: right;font-weight:bold;font-size:1.3rem">	
						{%= data[i]["party"]?data[i]["party"].split("-",2)[0]:"" %}
					</td>

					<td  style="width:20px;"></td>
									
				</tr>
			{% } %}

			<!-- <tr class="cvs-footer">
				<th class="text-left">{%= __("Cheques Required") %}</th>
				<th></th>
				<th></th>
				<th></th>
				<th></th>
				<th></th>
				<th></th>
				<th class="text-right">
			</tr> -->

		</tbody>
	</table>

	{% for page in layout %}
	<div class="page-break">
		<div {% if print_settings.repeat_header_footer %} id="header-html" class="hidden-pdf" {% endif %}>
			{{ add_header(loop.index, layout|len, doc, letter_head, no_letterhead, footer, print_settings) }}
		</div>
	
		{% if print_settings.repeat_header_footer %}
		<div id="footer-html" class="visible-pdf">
			{% if not no_letterhead and footer %}
			<div class="letter-head-footer">
				{{ footer }}
			</div>
			{% endif %}
			<p class="text-center small page-number visible-pdf">
				{{ _("Page {0} of {1}").format('<span class="page"></span>', '<span class="topage"></span>') }}
			</p>
		</div>
		{% endif %}
	
		{% for section in page %}
		<div class="row section-break">
			{% if section.columns.fields %}
					{%- if doc.print_line_breaks and loop.index != 1 -%}<hr>{%- endif -%}
					{%- if doc.print_section_headings and section.label and section.has_data -%}
					<h4 class='col-sm-12'>{{ _(section.label) }}</h4>
				{% endif %}
			{%- endif -%}

		</div>
		{% endfor %}
	</div>
	{% endfor %}